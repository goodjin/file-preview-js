<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ–‡æ¡£æ¨¡å—P1é˜¶æ®µé›†æˆæµ‹è¯•</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }

    .test-container {
      max-width: 1400px;
      margin: 0 auto;
    }

    h1 {
      color: #333;
      margin-bottom: 20px;
    }

    .test-section {
      background: white;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .test-section h2 {
      color: #555;
      margin-bottom: 15px;
      font-size: 18px;
    }

    .test-controls {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
    }

    button.primary {
      background: #007bff;
      color: white;
    }

    button.primary:hover {
      background: #0056b3;
    }

    button.success {
      background: #28a745;
      color: white;
    }

    button.success:hover {
      background: #1e7e34;
    }

    button.warning {
      background: #ffc107;
      color: #333;
    }

    button.warning:hover {
      background: #d39e00;
    }

    .file-upload {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 4px;
    }

    .file-upload input[type="file"] {
      padding: 5px;
    }

    .preview-area {
      border: 2px solid #ddd;
      border-radius: 4px;
      padding: 20px;
      min-height: 300px;
      max-height: 600px;
      overflow: auto;
      background: white;
    }

    .test-results {
      margin-top: 20px;
    }

    .test-result-item {
      padding: 10px;
      margin: 5px 0;
      border-radius: 4px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .test-result-item.pass {
      background: #d4edda;
      color: #155724;
      border-left: 4px solid #28a745;
    }

    .test-result-item.fail {
      background: #f8d7da;
      color: #721c24;
      border-left: 4px solid #dc3545;
    }

    .test-result-item.info {
      background: #d1ecf1;
      color: #0c5460;
      border-left: 4px solid #17a2b8;
    }

    .status-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: bold;
    }

    .status-badge.pass {
      background: #28a745;
      color: white;
    }

    .status-badge.fail {
      background: #dc3545;
      color: white;
    }

    .status-badge.pending {
      background: #ffc107;
      color: #333;
    }

    .test-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .summary-card {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
    }

    .summary-card h3 {
      font-size: 24px;
      color: #333;
      margin-bottom: 5px;
    }

    .summary-card p {
      color: #666;
      font-size: 14px;
    }

    .tabs {
      display: flex;
      gap: 5px;
      margin-bottom: 15px;
      border-bottom: 2px solid #ddd;
    }

    .tab {
      padding: 10px 20px;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      margin-bottom: -2px;
      transition: all 0.3s;
    }

    .tab:hover {
      background: #f8f9fa;
    }

    .tab.active {
      border-bottom-color: #007bff;
      color: #007bff;
      font-weight: bold;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .log-console {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 15px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      max-height: 300px;
      overflow: auto;
    }

    .log-entry {
      margin: 5px 0;
      padding: 3px 0;
      border-bottom: 1px solid #333;
    }

    .log-entry.error {
      color: #f48771;
    }

    .log-entry.success {
      color: #4ec9b0;
    }

    .log-entry.info {
      color: #9cdcfe;
    }

    .performance-metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
      margin-top: 10px;
    }

    .metric-card {
      background: #fff;
      border: 1px solid #ddd;
      padding: 10px;
      border-radius: 4px;
      text-align: center;
    }

    .metric-value {
      font-size: 20px;
      font-weight: bold;
      color: #007bff;
    }

    .metric-label {
      font-size: 12px;
      color: #666;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1>ğŸ“„ æ–‡æ¡£æ¨¡å—P1é˜¶æ®µé›†æˆæµ‹è¯•</h1>

    <!-- æµ‹è¯•æ¦‚è§ˆ -->
    <div class="test-section">
      <h2>æµ‹è¯•æ¦‚è§ˆ</h2>
      <div class="test-summary">
        <div class="summary-card">
          <h3 id="total-tests">0</h3>
          <p>æ€»æµ‹è¯•æ•°</p>
        </div>
        <div class="summary-card">
          <h3 id="passed-tests" style="color: #28a745;">0</h3>
          <p>é€šè¿‡</p>
        </div>
        <div class="summary-card">
          <h3 id="failed-tests" style="color: #dc3545;">0</h3>
          <p>å¤±è´¥</p>
        </div>
        <div class="summary-card">
          <h3 id="success-rate">0%</h3>
          <p>é€šè¿‡ç‡</p>
        </div>
      </div>

      <div class="test-controls">
        <button class="primary" onclick="runAllTests()">ğŸš€ è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
        <button class="warning" onclick="resetTests()">ğŸ”„ é‡ç½®æµ‹è¯•</button>
        <button class="success" onclick="exportReport()">ğŸ“Š å¯¼å‡ºæŠ¥å‘Š</button>
      </div>
    </div>

    <!-- åŠŸèƒ½æµ‹è¯• -->
    <div class="test-section">
      <h2>åŠŸèƒ½æµ‹è¯•</h2>
      <div class="tabs">
        <div class="tab active" data-tab="txt">TXTæµ‹è¯•</div>
        <div class="tab" data-tab="md">Markdownæµ‹è¯•</div>
        <div class="tab" data-tab="xml">XMLæµ‹è¯•</div>
        <div class="tab" data-tab="json">JSONæµ‹è¯•</div>
        <div class="tab" data-tab="error">é”™è¯¯å¤„ç†æµ‹è¯•</div>
      </div>

      <!-- TXTæµ‹è¯• -->
      <div class="tab-content active" id="tab-txt">
        <div class="test-controls">
          <div class="file-upload">
            <input type="file" id="txt-file-input" accept=".txt">
            <button class="primary" onclick="testTxtFile()">æµ‹è¯•TXTæ–‡ä»¶</button>
          </div>
          <button onclick="testTxtEncodings()">æµ‹è¯•ä¸åŒç¼–ç </button>
          <button onclick="testTxtLargeFile()">æµ‹è¯•å¤§æ–‡ä»¶</button>
          <button onclick="testTxtSearch()">æµ‹è¯•æœç´¢åŠŸèƒ½</button>
        </div>
        <div class="preview-area" id="txt-preview"></div>
      </div>

      <!-- Markdownæµ‹è¯• -->
      <div class="tab-content" id="tab-md">
        <div class="test-controls">
          <div class="file-upload">
            <input type="file" id="md-file-input" accept=".md,.markdown">
            <button class="primary" onclick="testMdFile()">æµ‹è¯•Markdownæ–‡ä»¶</button>
          </div>
          <button onclick="testMdGFM()">æµ‹è¯•GFMè¯­æ³•</button>
          <button onclick="testMdCodeHighlight()">æµ‹è¯•ä»£ç é«˜äº®</button>
          <button onclick="testMdComplex()">æµ‹è¯•å¤æ‚æ–‡æ¡£</button>
        </div>
        <div class="preview-area" id="md-preview"></div>
      </div>

      <!-- XMLæµ‹è¯• -->
      <div class="tab-content" id="tab-xml">
        <div class="test-controls">
          <div class="file-upload">
            <input type="file" id="xml-file-input" accept=".xml">
            <button class="primary" onclick="testXmlFile()">æµ‹è¯•XMLæ–‡ä»¶</button>
          </div>
          <button onclick="testXmlFormatting()">æµ‹è¯•æ ¼å¼åŒ–</button>
          <button onclick="testXmlHighlight()">æµ‹è¯•è¯­æ³•é«˜äº®</button>
          <button onclick="testXmlFold()">æµ‹è¯•æŠ˜å /å±•å¼€</button>
        </div>
        <div class="preview-area" id="xml-preview"></div>
      </div>

      <!-- JSONæµ‹è¯• -->
      <div class="tab-content" id="tab-json">
        <div class="test-controls">
          <div class="file-upload">
            <input type="file" id="json-file-input" accept=".json">
            <button class="primary" onclick="testJsonFile()">æµ‹è¯•JSONæ–‡ä»¶</button>
          </div>
          <button onclick="testJsonFormatting()">æµ‹è¯•æ ¼å¼åŒ–</button>
          <button onclick="testJsonHighlight()">æµ‹è¯•è¯­æ³•é«˜äº®</button>
          <button onclick="testJsonFold()">æµ‹è¯•æŠ˜å /å±•å¼€</button>
        </div>
        <div class="preview-area" id="json-preview"></div>
      </div>

      <!-- é”™è¯¯å¤„ç†æµ‹è¯• -->
      <div class="tab-content" id="tab-error">
        <div class="test-controls">
          <button onclick="testCorruptFile()">æµ‹è¯•æŸåæ–‡ä»¶</button>
          <button onclick="testInvalidFormat()">æµ‹è¯•æ ¼å¼é”™è¯¯</button>
          <button onclick="testUnsupportedFormat()">æµ‹è¯•ä¸æ”¯æŒçš„æ ¼å¼</button>
        </div>
        <div class="preview-area" id="error-preview"></div>
      </div>
    </div>

    <!-- æµ‹è¯•ç»“æœ -->
    <div class="test-section">
      <h2>æµ‹è¯•ç»“æœ</h2>
      <div class="test-results" id="test-results">
        <div class="test-result-item info">
          <span class="status-badge pending">å¾…æµ‹è¯•</span>
          <span>è¯·è¿è¡Œæµ‹è¯•æŸ¥çœ‹ç»“æœ</span>
        </div>
      </div>
    </div>

    <!-- æ€§èƒ½æŒ‡æ ‡ -->
    <div class="test-section">
      <h2>æ€§èƒ½æŒ‡æ ‡</h2>
      <div class="performance-metrics" id="performance-metrics">
        <div class="metric-card">
          <div class="metric-value" id="avg-parse-time">-</div>
          <div class="metric-label">å¹³å‡è§£ææ—¶é—´</div>
        </div>
        <div class="metric-card">
          <div class="metric-value" id="avg-render-time">-</div>
          <div class="metric-label">å¹³å‡æ¸²æŸ“æ—¶é—´</div>
        </div>
        <div class="metric-card">
          <div class="metric-value" id="max-file-size">-</div>
          <div class="metric-label">æœ€å¤§æ–‡ä»¶å¤§å°</div>
        </div>
        <div class="metric-card">
          <div class="metric-value" id="total-time">-</div>
          <div class="metric-label">æ€»æµ‹è¯•æ—¶é—´</div>
        </div>
      </div>
    </div>

    <!-- æ—¥å¿—æ§åˆ¶å° -->
    <div class="test-section">
      <h2>æµ‹è¯•æ—¥å¿—</h2>
      <div class="log-console" id="log-console"></div>
    </div>
  </div>

  <!-- å¼•å…¥æµ‹è¯•è„šæœ¬ -->
  <script type="module" src="./document-p1-test.js"></script>
</body>
</html>
