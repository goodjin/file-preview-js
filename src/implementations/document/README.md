# æ–‡æ¡£é¢„è§ˆæ¨¡å—

## æ¨¡å—æ¦‚è¿°

æ–‡æ¡£é¢„è§ˆæ¨¡å—æ˜¯æ–‡ä»¶é¢„è§ˆç³»ç»Ÿçš„æ ¸å¿ƒæ¨¡å—ä¹‹ä¸€ï¼Œè´Ÿè´£å¤šç§æ–‡æ¡£æ ¼å¼çš„çº¯å‰ç«¯é¢„è§ˆå®ç°ã€‚

## å½“å‰å®ç°çŠ¶æ€

### âœ… å·²å®Œæˆï¼ˆP0é˜¶æ®µï¼‰
- **PDFé¢„è§ˆåŠŸèƒ½** - åŸºäºPDF.jsçš„å®Œæ•´PDFé¢„è§ˆå®ç°
  - âœ… PDFæ–‡ä»¶åŠ è½½å’Œæ¸²æŸ“
  - âœ… ç¼©æ”¾æ§åˆ¶ï¼ˆ25%-400%ï¼‰
  - âœ… ç¿»é¡µæ§åˆ¶ï¼ˆä¸Šä¸€é¡µ/ä¸‹ä¸€é¡µ/è·³è½¬ï¼‰
  - âœ… æ»šåŠ¨æŸ¥çœ‹
  - âœ… åŠ è½½è¿›åº¦æ˜¾ç¤º
  - âœ… å‹å¥½çš„é”™è¯¯æç¤º
  - âœ… çº¯JavaScriptå®ç°ï¼Œæ— æœåŠ¡ç«¯ä¾èµ–

### ğŸš§ å¾…å®ç°ï¼ˆåç»­é˜¶æ®µï¼‰
- TXTé¢„è§ˆï¼ˆP1ï¼‰
- MDé¢„è§ˆï¼ˆP1ï¼‰
- JSONé¢„è§ˆï¼ˆP1ï¼‰
- XMLé¢„è§ˆï¼ˆP1ï¼‰
- RTFé¢„è§ˆï¼ˆP2ï¼‰
- EPUBé¢„è§ˆï¼ˆP2ï¼‰
- OFDé¢„è§ˆï¼ˆP2ï¼‰

## æ¨¡å—ç»“æ„

```
document/
â”œâ”€â”€ README.md                           # æœ¬æ–‡æ¡£
â”œâ”€â”€ æ–‡æ¡£æ¨¡å—è®¾è®¡æ–‡æ¡£.md                 # è¯¦ç»†è®¾è®¡æ–‡æ¡£
â”œâ”€â”€ index.js                            # æ¨¡å—å…¥å£
â”œâ”€â”€ DocumentPreviewer.js                # æ–‡æ¡£é¢„è§ˆå™¨åŸºç±»
â”œâ”€â”€ pdf/                                # PDFé¢„è§ˆå®ç°
â”‚   â”œâ”€â”€ README.md                       # PDFæ¨¡å—ä½¿ç”¨è¯´æ˜
â”‚   â”œâ”€â”€ demo.html                       # æ¼”ç¤ºé¡µé¢
â”‚   â”œâ”€â”€ index.js                        # PDFæ¨¡å—å…¥å£
â”‚   â”œâ”€â”€ PDFPreviewer.js                # PDFé¢„è§ˆå™¨ä¸»ç±»
â”‚   â”œâ”€â”€ PDFRenderer.js                  # PDFæ¸²æŸ“å¼•æ“
â”‚   â””â”€â”€ PDFControls.js                  # PDFæ§åˆ¶ç»„ä»¶
â””â”€â”€ utils/                              # å·¥å…·å‡½æ•°
    â”œâ”€â”€ FileUtils.js                    # æ–‡ä»¶è¯»å–å·¥å…·
    â””â”€â”€ PageUtils.js                    # é¡µé¢å¤„ç†å·¥å…·
```

## å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ç”¨æ³•

```javascript
import { createPDFPreviewer } from './index.js';

// åˆ›å»ºé¢„è§ˆå™¨å®ä¾‹
const previewer = createPDFPreviewer({
  container: document.getElementById('preview-container'),
  fileInfo: {
    name: 'example.pdf',
    size: 1024000
  },
  onLoad: () => console.log('åŠ è½½å®Œæˆ'),
  onError: (error) => console.error('åŠ è½½å¤±è´¥:', error),
  onProgress: (progress) => console.log('è¿›åº¦:', progress + '%')
});

// åŠ è½½PDFæ–‡ä»¶
await previewer.load(file);
```

### é«˜çº§æ§åˆ¶

```javascript
// é¡µé¢æ§åˆ¶
previewer.previousPage();    // ä¸Šä¸€é¡µ
previewer.nextPage();        // ä¸‹ä¸€é¡µ
previewer.goToPage(5);       // è·³è½¬åˆ°ç¬¬6é¡µ

// ç¼©æ”¾æ§åˆ¶
previewer.zoomIn();          // æ”¾å¤§
previewer.zoomOut();         // ç¼©å°
previewer.setScale(1.5);     // è®¾ç½®ä¸º150%

// è·å–ä¿¡æ¯
console.log('æ€»é¡µæ•°:', previewer.getTotalPages());
console.log('å½“å‰é¡µ:', previewer.getCurrentPage());
console.log('ç¼©æ”¾æ¯”ä¾‹:', previewer.getScale());

// é”€æ¯é¢„è§ˆå™¨
previewer.destroy();
```

## ä»£ç é‡ç»Ÿè®¡

| æ–‡ä»¶ | ä»£ç é‡ | é™åˆ¶ | çŠ¶æ€ |
|------|--------|------|------|
| FileUtils.js | ~90è¡Œ | <150è¡Œ | âœ… |
| PageUtils.js | ~80è¡Œ | <150è¡Œ | âœ… |
| DocumentPreviewer.js | ~70è¡Œ | <200è¡Œ | âœ… |
| pdf/index.js | ~40è¡Œ | <100è¡Œ | âœ… |
| PDFPreviewer.js | ~160è¡Œ | <300è¡Œ | âœ… |
| PDFRenderer.js | ~140è¡Œ | <400è¡Œ | âœ… |
| PDFControls.js | ~140è¡Œ | <200è¡Œ | âœ… |
| document/index.js | ~60è¡Œ | <100è¡Œ | âœ… |

## æŠ€æœ¯æ ˆ

- **æ ¸å¿ƒæ¡†æ¶**: çº¯JavaScriptï¼ˆES6+ï¼‰
- **PDFæ¸²æŸ“**: PDF.js (v3.11.174)
- **æ— éœ€æ„å»º**: ç›´æ¥ä½¿ç”¨ES Modules

## ä¾èµ–è¯´æ˜

### å¤–éƒ¨ä¾èµ–
- PDF.js - Mozillaå¼€æºPDFæ¸²æŸ“åº“
  * CDNåœ°å€: https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js
  * Worker: https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js

### å†…éƒ¨ä¾èµ–
- DocumentPrevieweråŸºç±»ï¼ˆæœ¬æ¨¡å—å†…ï¼‰
- FileUtilså·¥å…·ï¼ˆæœ¬æ¨¡å—å†…ï¼‰
- PageUtilså·¥å…·ï¼ˆæœ¬æ¨¡å—å†…ï¼‰

## æµè§ˆå™¨å…¼å®¹æ€§

| æµè§ˆå™¨ | æœ€ä½ç‰ˆæœ¬ | å¤‡æ³¨ |
|--------|---------|------|
| Chrome | 90+ | âœ… æ¨è |
| Firefox | 88+ | âœ… å®Œæ•´æ”¯æŒ |
| Safari | 14+ | âœ… æ”¯æŒ |
| Edge | 90+ | âœ… æ”¯æŒ |

## APIæ–‡æ¡£

### æ¨¡å—å¯¼å‡º

#### createPreviewer(file, options)
æ ¹æ®æ–‡ä»¶ç±»å‹åˆ›å»ºé¢„è§ˆå™¨å®ä¾‹ã€‚

#### createPDFPreviewer(options)
åˆ›å»ºPDFé¢„è§ˆå™¨å®ä¾‹ã€‚

#### isSupported(file)
æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æ”¯æŒé¢„è§ˆã€‚

### DocumentPrevieweråŸºç±»æ–¹æ³•

æ‰€æœ‰æ–‡æ¡£é¢„è§ˆå™¨éƒ½ç»§æ‰¿è‡ªDocumentPrevieweråŸºç±»ï¼š

- `load(file)` - åŠ è½½æ–‡ä»¶
- `renderPage(pageIndex)` - æ¸²æŸ“æŒ‡å®šé¡µé¢
- `destroy()` - é”€æ¯å®ä¾‹

### PDFPrevieweræ‰©å±•æ–¹æ³•

é™¤äº†åŸºç±»æ–¹æ³•å¤–ï¼ŒPDFPreviewerè¿˜æä¾›ï¼š

- `setScale(scale)` - è®¾ç½®ç¼©æ”¾çº§åˆ«
- `zoomIn()` - æ”¾å¤§
- `zoomOut()` - ç¼©å°
- `goToPage(pageIndex)` - è·³è½¬åˆ°æŒ‡å®šé¡µ
- `previousPage()` - ä¸Šä¸€é¡µ
- `nextPage()` - ä¸‹ä¸€é¡µ
- `getTotalPages()` - è·å–æ€»é¡µæ•°
- `getCurrentPage()` - è·å–å½“å‰é¡µç 
- `getScale()` - è·å–å½“å‰ç¼©æ”¾æ¯”ä¾‹

## æ¼”ç¤º

è®¿é—® `pdf/demo.html` æŸ¥çœ‹PDFé¢„è§ˆåŠŸèƒ½çš„å®Œæ•´æ¼”ç¤ºã€‚

## æ€§èƒ½ä¼˜åŒ–

### å·²å®ç°çš„ä¼˜åŒ–
- æŒ‰éœ€æ¸²æŸ“ï¼šåªæ¸²æŸ“å½“å‰é¡µé¢
- é¡µé¢ç¼“å­˜ï¼šç¼“å­˜å·²æ¸²æŸ“çš„é¡µé¢ï¼ˆæœ€å¤š10é¡µï¼‰
- è¿›åº¦åé¦ˆï¼šå¤§æ–‡ä»¶åŠ è½½æ˜¾ç¤ºè¿›åº¦

### å»ºè®®çš„æœ€ä½³å®è·µ
1. åŠæ—¶è°ƒç”¨destroy()é‡Šæ”¾èµ„æº
2. å¤§æ–‡ä»¶å»ºè®®åˆ†ç‰‡å¤„ç†
3. é¿å…é¢‘ç¹åˆ‡æ¢ç¼©æ”¾çº§åˆ«

## é”™è¯¯å¤„ç†

é¢„è§ˆå™¨é€šè¿‡onErrorå›è°ƒä¼ é€’é”™è¯¯ä¿¡æ¯ï¼š

| é”™è¯¯ç±»å‹ | æè¿° | å¤„ç†å»ºè®® |
|---------|------|---------|
| ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ | æ–‡ä»¶ä¸æ˜¯PDFæ ¼å¼ | æç¤ºç”¨æˆ·ä¸Šä¼ PDFæ–‡ä»¶ |
| PDFåŠ è½½å¤±è´¥ | æ–‡ä»¶æŸåæˆ–æ ¼å¼é”™è¯¯ | æç¤ºç”¨æˆ·æ£€æŸ¥æ–‡ä»¶ |
| é¡µé¢æ¸²æŸ“å¤±è´¥ | ç‰¹å®šé¡µé¢æ¸²æŸ“é”™è¯¯ | è·³è¿‡è¯¥é¡µé¢ï¼Œæç¤ºç”¨æˆ· |
| æ–‡ä»¶è¯»å–å¤±è´¥ | æ–‡ä»¶è¯»å–è¿‡ç¨‹ä¸­å‡ºé”™ | æç¤ºç”¨æˆ·é‡æ–°å°è¯• |

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„æ–‡æ¡£æ ¼å¼æ”¯æŒ

1. ç»§æ‰¿DocumentPrevieweråŸºç±»
2. å®ç°loadã€renderPageæ–¹æ³•
3. åœ¨index.jsä¸­æ³¨å†Œæ–°çš„æ ¼å¼
4. ç¼–å†™ç›¸åº”çš„å·¥å…·ç±»å’Œæ¸²æŸ“å™¨
5. ç¼–å†™å•å…ƒæµ‹è¯•

### ä»£ç è§„èŒƒ

- éµå¾ªES6+è¯­æ³•è§„èŒƒ
- å•ä¸ªæ–‡ä»¶ä¸è¶…è¿‡500è¡Œ
- å‡½æ•°èŒè´£å•ä¸€
- å……åˆ†çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ä½¿ç”¨JSDocæ³¨é‡Šç±»å‹

## æµ‹è¯•

### å•å…ƒæµ‹è¯•
TODO: ç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹

### é›†æˆæµ‹è¯•
TODO: ç¼–å†™é›†æˆæµ‹è¯•ç”¨ä¾‹

### æ‰‹åŠ¨æµ‹è¯•
ä½¿ç”¨ `pdf/demo.html` è¿›è¡Œæ‰‹åŠ¨æµ‹è¯•ï¼š
- âœ… æ­£å¸¸PDFæ–‡ä»¶é¢„è§ˆ
- âœ… å¤šé¡µPDFæ–‡æ¡£ï¼ˆ50é¡µ+ï¼‰
- âœ… å¤§æ–‡ä»¶ï¼ˆ10MB+ï¼‰
- âœ… ç¼©æ”¾åŠŸèƒ½
- âœ… ç¿»é¡µåŠŸèƒ½
- âœ… åŠ è½½è¿›åº¦æ˜¾ç¤º
- âš ï¸ åŠ å¯†PDFæ–‡æ¡£ï¼ˆå¾…æµ‹è¯•ï¼‰
- âœ… é”™è¯¯æç¤º

## å¸¸è§é—®é¢˜

### Q: PDF.jsåº“æ˜¯ä»å“ªé‡ŒåŠ è½½çš„ï¼Ÿ
A: é¦–æ¬¡ä½¿ç”¨æ—¶ä¼šä»CDNè‡ªåŠ¨åŠ è½½ï¼Œç¡®ä¿ç½‘ç»œç•…é€šã€‚

### Q: æ”¯æŒåŠ å¯†çš„PDFæ–‡ä»¶å—ï¼Ÿ
A: ç›®å‰ä¸æ”¯æŒåŠ å¯†PDFæ–‡ä»¶ï¼Œéœ€è¦ç”¨æˆ·æä¾›å¯†ç ã€‚

### Q: å¤§æ–‡ä»¶åŠ è½½å¾ˆæ…¢æ€ä¹ˆåŠï¼Ÿ
A: å¤§æ–‡ä»¶åŠ è½½éœ€è¦æ—¶é—´ï¼Œç³»ç»Ÿä¼šæ˜¾ç¤ºåŠ è½½è¿›åº¦ã€‚å»ºè®®æ–‡ä»¶ä¸è¶…è¿‡50MBã€‚

### Q: å¦‚ä½•æ¸…é™¤é¡µé¢ç¼“å­˜ï¼Ÿ
A: è°ƒç”¨destroy()æ–¹æ³•ä¼šè‡ªåŠ¨æ¸…é™¤æ‰€æœ‰ç¼“å­˜ã€‚

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2024)
- âœ… å®ç°PDFé¢„è§ˆåŠŸèƒ½
- âœ… æ”¯æŒç¼©æ”¾ã€ç¿»é¡µç­‰åŸºç¡€æ§åˆ¶
- âœ… æä¾›åŠ è½½è¿›åº¦å’Œé”™è¯¯æç¤º
- âœ… ç¼–å†™å®Œæ•´çš„APIæ–‡æ¡£å’Œæ¼”ç¤º

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤ä»£ç 
4. ç¼–å†™æµ‹è¯•
5. æäº¤Pull Request

## è®¸å¯è¯

MIT License

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»æ¨¡å—è´Ÿè´£äººã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2024  
**ç»´æŠ¤è€…**: æ–‡æ¡£æ¨¡å—å›¢é˜Ÿ
