# 文件预览系统 - 组件规范文档

## 1. 组件设计规范概述

### 1.1 组件分类
- **基础组件**：按钮、输入框、图标等
- **业务组件**：文件上传、预览容器、工具栏等
- **布局组件**：导航栏、侧边栏、容器等
- **反馈组件**：提示框、加载动画、进度条等

### 1.2 命名规范
- **文件命名**：PascalCase（如 `FilePreview.tsx`）
- **组件命名**：PascalCase（如 `PreviewContainer`）
- **样式类命名**：kebab-case（如 `file-preview-container`）
- **变量命名**：camelCase（如 `previewSize`）

### 1.3 组件结构
```
FilePreview/
├── index.tsx           # 组件主文件
├── index.scss          # 组件样式
├── index.test.tsx      # 组件测试
├── types.ts            # 类型定义
└── README.md           # 组件说明文档
```

## 2. 基础组件规范

### 2.1 按钮组件（Button）

#### 2.1.1 组件接口定义
```typescript
interface ButtonProps {
  type?: 'primary' | 'secondary' | 'text' | 'icon';
  size?: 'small' | 'medium' | 'large';
  disabled?: boolean;
  loading?: boolean;
  icon?: ReactNode;
  children?: ReactNode;
  onClick?: (event: MouseEvent) => void;
  className?: string;
}
```

#### 2.1.2 样式规范
```scss
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  font-weight: 500;
  
  // 大小变体
  &--small {
    height: 32px;
    padding: 0 16px;
    font-size: 13px;
  }
  
  &--medium {
    height: 40px;
    padding: 0 24px;
    font-size: 14px;
  }
  
  &--large {
    height: 48px;
    padding: 0 32px;
    font-size: 16px;
  }
  
  // 类型变体
  &--primary {
    background-color: #3B82F6;
    color: #FFFFFF;
    
    &:hover {
      background-color: #2563EB;
    }
    
    &:active {
      background-color: #1D4ED8;
    }
  }
  
  &--secondary {
    background-color: #FFFFFF;
    border: 1px solid #E5E7EB;
    color: #1F2937;
    
    &:hover {
      background-color: #F9FAFB;
      border-color: #3B82F6;
    }
  }
  
  // 禁用状态
  &--disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
  }
  
  // 加载状态
  &--loading {
    pointer-events: none;
  }
}
```

#### 2.1.3 使用示例
```typescript
<Button type="primary" onClick={handlePreview}>
  预览文件
</Button>

<Button type="icon" icon={<DownloadIcon />} />
```

### 2.2 图标组件（Icon）

#### 2.2.1 组件接口定义
```typescript
interface IconProps {
  name: string;           // 图标名称
  size?: number;         // 图标尺寸（像素）
  color?: string;        // 图标颜色
  className?: string;
  onClick?: (event: MouseEvent) => void;
}
```

#### 2.2.2 图标尺寸规范
```
XS: 12px  - 小标签、按钮内图标
SM: 16px  - 文字旁边的小图标
MD: 24px  - 功能按钮图标
LG: 32px  - 大功能区图标
XL: 48px  - 文件类型标识
```

#### 2.2.3 图标颜色规范
```typescript
const iconColors = {
  primary: '#3B82F6',
  secondary: '#6B7280',
  success: '#10B981',
  warning: '#F59E0B',
  error: '#EF4444',
  info: '#3B82F6',
};
```

#### 2.2.4 文件类型图标映射
```typescript
const fileTypeIcons = {
  // Office 文档类
  doc: { name: 'word', color: '#D04424' },
  docx: { name: 'word', color: '#D04424' },
  xls: { name: 'excel', color: '#217346' },
  xlsx: { name: 'excel', color: '#217346' },
  ppt: { name: 'powerpoint', color: '#D24726' },
  pptx: { name: 'powerpoint', color: '#D24726' },
  
  // 文档类
  pdf: { name: 'pdf', color: '#F40F02' },
  txt: { name: 'text', color: '#2D56B1' },
  md: { name: 'markdown', color: '#083fa1' },
  xml: { name: 'code', color: '#0078D7' },
  json: { name: 'code', color: '#0078D7' },
  
  // 图片类
  jpg: { name: 'image', color: '#10B981' },
  png: { name: 'image', color: '#10B981' },
  gif: { name: 'image', color: '#10B981' },
  svg: { name: 'image', color: '#10B981' },
  
  // 音视频类
  mp3: { name: 'audio', color: '#8B5CF6' },
  mp4: { name: 'video', color: '#8B5CF6' },
  
  // 压缩包类
  zip: { name: 'zip', color: '#F59E0B' },
  rar: { name: 'zip', color: '#F59E0B' },
  '7z': { name: 'zip', color: '#F59E0B' },
  
  // 其他类
  default: { name: 'file', color: '#6B7280' },
};
```

### 2.3 输入框组件（Input）

#### 2.3.1 组件接口定义
```typescript
interface InputProps {
  type?: 'text' | 'number' | 'password' | 'search';
  value?: string;
  placeholder?: string;
  disabled?: boolean;
  error?: boolean;
  errorMessage?: string;
  prefix?: ReactNode;
  suffix?: ReactNode;
  onChange?: (value: string) => void;
  onFocus?: (event: FocusEvent) => void;
  onBlur?: (event: FocusEvent) => void;
}
```

#### 2.3.2 样式规范
```scss
.input {
  display: flex;
  align-items: center;
  height: 40px;
  padding: 0 12px;
  border: 1px solid #E5E7EB;
  border-radius: 6px;
  font-size: 14px;
  color: #1F2937;
  background-color: #FFFFFF;
  transition: all 0.2s ease-in-out;
  
  &:hover {
    border-color: #9CA3AF;
  }
  
  &:focus {
    outline: none;
    border-color: #3B82F6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }
  
  &--error {
    border-color: #EF4444;
    
    &:focus {
      border-color: #EF4444;
      box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
    }
  }
  
  &--disabled {
    background-color: #F3F4F6;
    color: #9CA3AF;
    cursor: not-allowed;
  }
  
  &__prefix,
  &__suffix {
    display: flex;
    align-items: center;
    color: #6B7280;
  }
}
```

### 2.4 工具提示组件（Tooltip）

#### 2.4.1 组件接口定义
```typescript
interface TooltipProps {
  content: string;          // 提示内容
  placement?: 'top' | 'bottom' | 'left' | 'right';
  delay?: number;          // 延迟显示时间（毫秒）
  children: ReactNode;      // 触发元素
}
```

#### 2.4.2 样式规范
```scss
.tooltip {
  max-width: 200px;
  padding: 8px 12px;
  background-color: #1F2937;
  color: #FFFFFF;
  border-radius: 4px;
  font-size: 12px;
  line-height: 1.5;
  text-align: center;
  pointer-events: none;
  
  &::after {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    border-style: solid;
  }
  
  // 箭头方向
  &--top::after {
    bottom: -6px;
    left: 50%;
    margin-left: -6px;
    border-width: 6px 6px 0;
    border-color: #1F2937 transparent transparent transparent;
  }
  
  &--bottom::after {
    top: -6px;
    left: 50%;
    margin-left: -6px;
    border-width: 0 6px 6px;
    border-color: transparent transparent #1F2937 transparent;
  }
}
```

## 3. 业务组件规范

### 3.1 文件上传组件（FileUpload）

#### 3.1.1 组件接口定义
```typescript
interface FileUploadProps {
  accept?: string;              // 接受的文件类型（MIME类型）
  maxSize?: number;             // 最大文件大小（字节）
  multiple?: boolean;           // 是否支持多文件上传
  dragable?: boolean;           // 是否支持拖拽上传
  onFileSelect?: (files: File[]) => void;
  onUploadProgress?: (file: File, progress: number) => void;
  onUploadSuccess?: (file: File) => void;
  onUploadError?: (file: File, error: Error) => void;
}
```

#### 3.1.2 样式规范
```scss
.file-upload {
  width: 100%;
  min-height: 200px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border: 2px dashed #E5E7EB;
  border-radius: 8px;
  background-color: #F9FAFB;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  
  &:hover {
    border-color: #3B82F6;
    background-color: #EFF6FF;
  }
  
  &--dragging {
    border-color: #3B82F6;
    background-color: #DBEAFE;
  }
  
  &__icon {
    font-size: 48px;
    color: #9CA3AF;
    margin-bottom: 16px;
  }
  
  &__text {
    font-size: 14px;
    color: #6B7280;
  }
  
  &__hint {
    font-size: 12px;
    color: #9CA3AF;
    margin-top: 8px;
  }
}
```

#### 3.1.3 上传进度样式
```scss
.upload-progress {
  margin-top: 16px;
  width: 100%;
  max-width: 400px;
  
  &__bar {
    height: 4px;
    background-color: #E5E7EB;
    border-radius: 2px;
    overflow: hidden;
  }
  
  &__fill {
    height: 100%;
    background-color: #3B82F6;
    border-radius: 2px;
    transition: width 0.3s ease-in-out;
  }
  
  &__info {
    display: flex;
    justify-content: space-between;
    margin-top: 8px;
    font-size: 12px;
    color: #6B7280;
  }
}
```

### 3.2 预览容器组件（PreviewContainer）

#### 3.2.1 组件接口定义
```typescript
interface PreviewContainerProps {
  file: File | string;                  // 文件对象或URL
  fileType?: string;                    // 文件类型
  width?: number | string;              // 容器宽度
  height?: number | string;             // 容器高度
  zoom?: number;                        // 缩放比例
  minZoom?: number;                     // 最小缩放比例
  maxZoom?: number;                     // 最大缩放比例
  currentPage?: number;                // 当前页码
  totalPages?: number;                  // 总页数
  onLoad?: () => void;                  // 加载完成回调
  onError?: (error: Error) => void;     // 错误回调
  onZoomChange?: (zoom: number) => void; // 缩放变化回调
  onPageChange?: (page: number) => void; // 页面变化回调
}
```

#### 3.2.2 样式规范
```scss
.preview-container {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  background-color: #FFFFFF;
  border-radius: 8px;
  overflow: hidden;
  
  &__content {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: auto;
    padding: 20px;
    position: relative;
  }
  
  &__canvas {
    max-width: 100%;
    max-height: 100%;
    transition: transform 0.3s ease-in-out;
  }
  
  &--loading {
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(255, 255, 255, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }
  }
  
  &--fullscreen {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1000;
    border-radius: 0;
  }
}
```

#### 3.2.3 加载状态设计
```scss
.loading-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  
  &__spinner {
    width: 32px;
    height: 32px;
    border: 3px solid #E5E7EB;
    border-top-color: #3B82F6;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
  
  &__text {
    margin-top: 16px;
    font-size: 14px;
    color: #6B7280;
  }
  
  &__progress {
    margin-top: 8px;
    font-size: 12px;
    color: #9CA3AF;
  }
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}
```

### 3.3 工具栏组件（Toolbar）

#### 3.3.1 组件接口定义
```typescript
interface ToolbarProps {
  position?: 'top' | 'bottom';           // 工具栏位置
  showZoom?: boolean;                    // 显示缩放控制
  showPageNav?: boolean;                 // 显示页面导航
  showFullscreen?: boolean;              // 显示全屏按钮
  showDownload?: boolean;                // 显示下载按钮
  showPrint?: boolean;                   // 显示打印按钮
  zoom?: number;                         // 当前缩放比例
  currentPage?: number;                  // 当前页码
  totalPages?: number;                   // 总页数
  onZoomIn?: () => void;                 // 放大
  onZoomOut?: () => void;                // 缩小
  onPreviousPage?: () => void;           // 上一页
  onNextPage?: () => void;               // 下一页
  onFullscreen?: () => void;             // 全屏
  onDownload?: () => void;               // 下载
  onPrint?: () => void;                  // 打印
}
```

#### 3.3.2 样式规范
```scss
.toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 16px;
  background-color: #FFFFFF;
  border-top: 1px solid #E5E7EB;
  gap: 8px;
  
  &__group {
    display: flex;
    align-items: center;
    gap: 4px;
  }
  
  &__separator {
    width: 1px;
    height: 24px;
    background-color: #E5E7EB;
    margin: 0 8px;
  }
  
  &--top {
    order: 0;
    border-top: none;
    border-bottom: 1px solid #E5E7EB;
  }
  
  &--bottom {
    order: 2;
  }
  
  &__button {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border: none;
    background-color: transparent;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    color: #6B7280;
    
    &:hover {
      background-color: #F3F4F6;
      color: #1F2937;
    }
    
    &:active {
      background-color: #E5E7EB;
    }
    
    &--disabled {
      opacity: 0.4;
      cursor: not-allowed;
      pointer-events: none;
    }
  }
  
  &__zoom-display {
    display: flex;
    align-items: center;
    padding: 0 12px;
    font-size: 14px;
    color: #1F2937;
    user-select: none;
  }
  
  &__page-display {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0 12px;
    font-size: 14px;
    color: #1F2937;
    user-select: none;
    
    &__current {
      cursor: pointer;
      color: #3B82F6;
      
      &:hover {
        text-decoration: underline;
      }
    }
  }
}
```

### 3.4 文件信息组件（FileInfo）

#### 3.4.1 组件接口定义
```typescript
interface FileInfoProps {
  fileName: string;                     // 文件名
  fileSize: number;                     // 文件大小（字节）
  fileType?: string;                   // 文件类型
  createdAt?: Date;                    // 创建时间
  modifiedAt?: Date;                   // 修改时间
  pageCount?: number;                   // 页数
  showIcon?: boolean;                   // 显示图标
  compact?: boolean;                   // 紧凑模式
}
```

#### 3.4.2 样式规范
```scss
.file-info {
  display: flex;
  align-items: center;
  gap: 12px;
  
  &__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    border-radius: 8px;
    color: #FFFFFF;
    font-size: 24px;
  }
  
  &__content {
    flex: 1;
    min-width: 0;
  }
  
  &__name {
    font-size: 14px;
    font-weight: 500;
    color: #1F2937;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  &__meta {
    display: flex;
    gap: 12px;
    margin-top: 4px;
    font-size: 12px;
    color: #6B7280;
  }
  
  &--compact {
    &__icon {
      width: 32px;
      height: 32px;
      font-size: 16px;
    }
    
    &__name {
      font-size: 13px;
    }
  }
}
```

## 4. 反馈组件规范

### 4.1 提示框组件（Alert）

#### 4.1.1 组件接口定义
```typescript
interface AlertProps {
  type?: 'success' | 'warning' | 'error' | 'info';
  title?: string;                       // 标题
  message: string;                      // 消息内容
  closable?: boolean;                   // 可关闭
  duration?: number;                    // 自动关闭时间（毫秒）
  onClose?: () => void;                 // 关闭回调
}
```

#### 4.1.2 样式规范
```scss
.alert {
  display: flex;
  align-items: flex-start;
  padding: 12px 16px;
  border-radius: 6px;
  margin-bottom: 16px;
  
  &__icon {
    margin-right: 12px;
    font-size: 18px;
  }
  
  &__content {
    flex: 1;
    min-width: 0;
  }
  
  &__title {
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 4px;
  }
  
  &__message {
    font-size: 13px;
    line-height: 1.5;
  }
  
  &__close {
    margin-left: 12px;
    cursor: pointer;
    color: #9CA3AF;
    font-size: 16px;
    
    &:hover {
      color: #6B7280;
    }
  }
  
  // 类型变体
  &--success {
    background-color: #D1FAE5;
    color: #065F46;
  }
  
  &--warning {
    background-color: #FEF3C7;
    color: #92400E;
  }
  
  &--error {
    background-color: #FEE2E2;
    color: #991B1B;
  }
  
  &--info {
    background-color: #DBEAFE;
    color: #1E40AF;
  }
}
```

### 4.2 加载动画组件（Spinner）

#### 4.2.1 组件接口定义
```typescript
interface SpinnerProps {
  size?: 'small' | 'medium' | 'large';
  color?: string;                       // 自定义颜色
  overlay?: boolean;                    // 遮罩模式
}
```

#### 4.2.2 样式规范
```scss
.spinner {
  display: inline-block;
  border: 3px solid #E5E7EB;
  border-top-color: #3B82F6;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  
  // 尺寸变体
  &--small {
    width: 16px;
    height: 16px;
    border-width: 2px;
  }
  
  &--medium {
    width: 32px;
    height: 32px;
    border-width: 3px;
  }
  
  &--large {
    width: 48px;
    height: 48px;
    border-width: 4px;
  }
  
  // 遮罩模式
  &--overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(255, 255, 255, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
  }
}
```

### 4.3 进度条组件（ProgressBar）

#### 4.3.1 组件接口定义
```typescript
interface ProgressBarProps {
  progress: number;                     // 进度（0-100）
  showInfo?: boolean;                   // 显示进度信息
  showSize?: boolean;                   // 显示已加载/总大小
  loadedSize?: number;                  // 已加载大小
  totalSize?: number;                   // 总大小
  status?: 'active' | 'success' | 'exception';
}
```

#### 4.3.2 样式规范
```scss
.progress-bar {
  width: 100%;
  
  &__track {
    height: 4px;
    background-color: #E5E7EB;
    border-radius: 2px;
    overflow: hidden;
  }
  
  &__fill {
    height: 100%;
    background-color: #3B82F6;
    border-radius: 2px;
    transition: width 0.3s ease-in-out;
    
    &--success {
      background-color: #10B981;
    }
    
    &--exception {
      background-color: #EF4444;
    }
  }
  
  &__info {
    display: flex;
    justify-content: space-between;
    margin-top: 8px;
    font-size: 12px;
    color: #6B7280;
  }
}
```

## 5. 布局组件规范

### 5.1 顶部导航栏组件（NavBar）

#### 5.1.1 组件接口定义
```typescript
interface NavBarProps {
  logo?: ReactNode;                     // Logo
  title?: string;                      // 页面标题
  actions?: ReactNode[];                // 操作按钮
  showBackButton?: boolean;             // 显示返回按钮
  onBack?: () => void;                  // 返回回调
  compact?: boolean;                    // 紧凑模式（移动端）
}
```

#### 5.1.2 样式规范
```scss
.nav-bar {
  display: flex;
  align-items: center;
  height: 60px;
  padding: 0 20px;
  background-color: #FFFFFF;
  border-bottom: 1px solid #E5E7EB;
  
  &__logo {
    display: flex;
    align-items: center;
    width: 120px;
    font-size: 18px;
    font-weight: 600;
    color: #3B82F6;
  }
  
  &__title {
    flex: 1;
    text-align: center;
    font-size: 16px;
    font-weight: 500;
    color: #1F2937;
  }
  
  &__actions {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 180px;
    justify-content: flex-end;
  }
  
  &--compact {
    height: 56px;
    padding: 0 16px;
    
    &__logo {
      font-size: 16px;
    }
    
    &__title {
      font-size: 14px;
      text-align: left;
    }
    
    &__actions {
      width: auto;
    }
  }
}
```

### 5.2 侧边栏组件（Sidebar）

#### 5.2.1 组件接口定义
```typescript
interface SidebarProps {
  width?: number | string;              // 侧边栏宽度
  collapsible?: boolean;               // 可折叠
  collapsed?: boolean;                  // 是否折叠
  position?: 'left' | 'right';         // 位置
  items: SidebarItem[];                // 菜单项
  onItemClick?: (item: SidebarItem) => void;
}
```

#### 5.2.2 样式规范
```scss
.sidebar {
  display: flex;
  flex-direction: column;
  background-color: #FFFFFF;
  border-right: 1px solid #E5E7EB;
  transition: width 0.3s ease-in-out;
  overflow-y: auto;
  
  &--collapsed {
    width: 64px;
  }
  
  &__item {
    display: flex;
    align-items: center;
    height: 48px;
    padding: 0 16px;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    color: #6B7280;
    
    &:hover {
      background-color: #F3F4F6;
      color: #1F2937;
    }
    
    &--active {
      background-color: #EFF6FF;
      color: #3B82F6;
      border-right: 2px solid #3B82F6;
    }
    
    &--collapsed {
      justify-content: center;
      padding: 0;
    }
  }
  
  &__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    margin-right: 12px;
    
    &--collapsed {
      margin-right: 0;
    }
  }
  
  &__label {
    font-size: 14px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    
    &--collapsed {
      display: none;
    }
  }
}
```

## 6. 响应式组件规范

### 6.1 移动端适配组件（MobileResponsive）

#### 6.1.1 断点定义
```typescript
const breakpoints = {
  xs: '320px',
  sm: '480px',
  md: '768px',
  lg: '1024px',
  xl: '1200px',
  '2xl': '1440px',
};
```

#### 6.1.2 响应式工具类
```scss
// 基于屏幕宽度的显示控制
.visible-xs { display: none; }
.visible-sm { display: none; }
.visible-md { display: none; }
.visible-lg { display: none; }
.visible-xl { display: none; }

.hidden-xs { display: block; }
.hidden-sm { display: block; }
.hidden-md { display: block; }
.hidden-lg { display: block; }
.hidden-xl { display: block; }

// 移动端优先
@media (max-width: 767px) {
  .visible-xs { display: block; }
  .hidden-xs { display: none; }
}

// 平板
@media (min-width: 768px) and (max-width: 1023px) {
  .visible-md { display: block; }
  .hidden-md { display: none; }
}

// 桌面端
@media (min-width: 1024px) {
  .visible-lg { display: block; }
  .hidden-lg { display: none; }
}
```

## 7. 组件测试规范

### 7.1 单元测试结构
```typescript
// Button.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { Button } from './Button';

describe('Button', () => {
  it('renders correctly', () => {
    render(<Button>Click me</Button>);
    expect(screen.getByText('Click me')).toBeInTheDocument();
  });

  it('handles click event', () => {
    const handleClick = jest.fn();
    render(<Button onClick={handleClick}>Click</Button>);
    fireEvent.click(screen.getByText('Click'));
    expect(handleClick).toHaveBeenCalledTimes(1);
  });

  it('renders in disabled state', () => {
    render(<Button disabled>Click</Button>);
    expect(screen.getByText('Click')).toBeDisabled();
  });

  it('renders with icon', () => {
    render(<Button icon={<Icon name="heart" />}>Like</Button>);
    expect(screen.getByRole('button')).toContainElement(
      screen.getByRole('img')
    );
  });
});
```

### 7.2 快照测试
```typescript
describe('Button Snapshots', () => {
  it('matches snapshot for primary button', () => {
    const tree = renderer.create(<Button type="primary">Click</Button>).toJSON();
    expect(tree).toMatchSnapshot();
  });

  it('matches snapshot for secondary button', () => {
    const tree = renderer.create(<Button type="secondary">Click</Button>).toJSON();
    expect(tree).toMatchSnapshot();
  });
});
```

## 8. 组件文档规范

### 8.1 组件 README 模板
```markdown
# ComponentName

简短描述组件的功能和用途。

## Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| name | string | - | 组件名称 |
| age | number | 18 | 年龄 |

## Examples

```tsx
<ComponentName name="John" age={25} />
```

## Notes

组件使用时的注意事项。
```

## 9. 组件性能优化规范

### 9.1 虚拟滚动
```typescript
// 对于列表类组件使用虚拟滚动
import { FixedSizeList } from 'react-window';

const FileList = ({ files }) => (
  <FixedSizeList
    height={600}
    itemCount={files.length}
    itemSize={80}
  >
    {({ index, style }) => (
      <div style={style}>
        <FileItem file={files[index]} />
      </div>
    )}
  </FixedSizeList>
);
```

### 9.2 代码分割
```typescript
// 懒加载大型组件
const PreviewContainer = React.lazy(() => import('./PreviewContainer'));

function App() {
  return (
    <React.Suspense fallback={<Spinner />}>
      <PreviewContainer file={file} />
    </React.Suspense>
  );
}
```

### 9.3 记忆化
```typescript
// 使用 React.memo 和 useMemo
const MemoizedPreviewer = React.memo(({ file }) => {
  const previewerData = useMemo(() => {
    return preparePreviewerData(file);
  }, [file]);
  
  return <Previewer data={previewerData} />;
});
```

---

**文档版本**: 1.0  
**编写日期**: 2024  
**设计师**: 文件预览系统UX设计师